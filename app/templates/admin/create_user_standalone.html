{% extends "admin/admin_base_standalone.html" %}

{% block title %}创建用户 - 管理控制台{% endblock %}

{% set page_title = "创建用户" %}
{% set page_subtitle = "创建新的系统用户账户" %}
{% set page_icon = "fas fa-user-plus" %}

{% block admin_content %}
<div class="admin-card">
    <div class="admin-card-header">
        <h5 class="admin-card-title">
            <i class="fas fa-user-plus"></i>
            创建新用户
        </h5>
    </div>
    <div class="admin-card-body">
        <form method="POST">
            {{ form.hidden_tag() }}

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="admin-form-group">
                    <label class="admin-form-label">用户名 *</label>
                    {{ form.username(class="admin-form-control") }}
                    {% if form.username.errors %}
                    <div style="color: var(--admin-danger); font-size: 12px; margin-top: 4px;">
                        {{ form.username.errors[0] }}
                    </div>
                    {% endif %}
                </div>
                <div class="admin-form-group">
                    <label class="admin-form-label">邮箱地址 *</label>
                    {{ form.email(class="admin-form-control") }}
                    {% if form.email.errors %}
                    <div style="color: var(--admin-danger); font-size: 12px; margin-top: 4px;">
                        {{ form.email.errors[0] }}
                    </div>
                    {% endif %}
                </div>
                <div class="admin-form-group">
                    <label class="admin-form-label">真实姓名</label>
                    {{ form.name(class="admin-form-control") }}
                </div>
                <div class="admin-form-group">
                    <label class="admin-form-label">用户角色</label>
                    {{ form.role_id(class="admin-form-select") }}
                </div>
                <div class="admin-form-group">
                    <label class="admin-form-label">密码</label>
                    {{ form.password(class="admin-form-control", placeholder="留空自动生成") }}
                    <div style="font-size: 12px; color: var(--admin-text-secondary); margin-top: 4px;">
                        留空将自动生成随机密码
                    </div>
                </div>
                <div class="admin-form-group">
                    <label class="admin-form-label">账户状态</label>
                    <div style="display: flex; gap: 20px; margin-top: 8px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            {{ form.is_active(style="margin-right: 8px;") }}
                            激活状态
                        </label>
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            {{ form.confirmed(style="margin-right: 8px;") }}
                            邮箱已确认
                        </label>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                <a href="{{ url_for('admin.users') }}" class="admin-btn">
                    <i class="fas fa-times"></i>
                    取消
                </a>
                <button type="submit" class="admin-btn primary">
                    <i class="fas fa-save"></i>
                    创建用户
                </button>
            </div>
        </form>
    </div>
</div>

<div class="admin-card">
    <div class="admin-card-header">
        <h5 class="admin-card-title">
            <i class="fas fa-info-circle"></i>
            创建说明
        </h5>
    </div>
    <div class="admin-card-body">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
            <div>
                <h6 style="font-size: 14px; font-weight: 600; color: var(--admin-text); margin-bottom: 12px;">
                    <i class="fas fa-key" style="color: var(--admin-info);"></i>
                    密码设置
                </h6>
                <ul style="font-size: 13px; color: var(--admin-text-secondary); padding-left: 20px;">
                    <li>如果留空密码字段，系统将自动生成12位随机密码</li>
                    <li>新用户首次登录后需要修改密码</li>
                    <li>密码必须至少8位，包含字母和数字</li>
                </ul>
            </div>
            <div>
                <h6 style="font-size: 14px; font-weight: 600; color: var(--admin-text); margin-bottom: 12px;">
                    <i class="fas fa-envelope" style="color: var(--admin-success);"></i>
                    邮件通知
                </h6>
                <ul style="font-size: 13px; color: var(--admin-text-secondary); padding-left: 20px;">
                    <li>创建成功后将发送欢迎邮件</li>
                    <li>邮件中包含临时密码和登录链接</li>
                    <li>如果未确认邮箱，用户需要先验证邮箱</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}